/* ==========================================================================
   RESPONSIVE FIXES FOR ISHORI THEME
   Comprehensive mobile and tablet improvements
   ========================================================================== */

/* Base Responsive Improvements */
* {
  box-sizing: border-box;
}

html {
  overflow-x: hidden;
}

body {
  overflow-x: hidden;
  width: 100%;
  max-width: 100vw;
}

/* Hide any debug/block ID text that might appear */
.shopify-section::after,
.shopify-section::before {
  display: none !important;
}

/* Hide section name/ID overlays */
.shopify-section[id*="block"]::after,
.shopify-section > div::after {
  content: none !important;
  display: none !important;
}

/* Hero video section fixes */
.ai-video-hero {
  margin-bottom: 0 !important;
  position: relative !important;
}

.ai-video-hero + .shopify-section {
  margin-top: 0 !important;
}

/* Remove any text overlays appearing after hero section */
.ai-video-hero ~ * {
  z-index: 1;
}

/* Hide any ID text that appears below sections */
.shopify-section > .section-id,
.shopify-section > span,
[class*="ai_gen_id"],
[class*="block-id"] {
  display: none !important;
}

/* Hide the visible block ID text overlay */
body::after,
.shopify-section::after {
  content: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  position: absolute !important;
  left: -9999px !important;
}

/* Ensure text nodes containing block IDs are hidden */
.shopify-section > div::first-line {
  font-size: 0 !important;
  line-height: 0 !important;
  height: 0 !important;
  opacity: 0 !important;
}

/* Hide block ID text that appears as plain text */
body > .shopify-section:first-of-type::after,
.shopify-section[id*="17629674727527ebc5"]::after,
.shopify-section[id*="17629674727527ebc5"] > *:not(.ai-video-hero) {
  display: none !important;
}

/* Target the specific text node */
.shopify-section > *:first-child:not([class]) {
  display: none !important;
}

/* Fix scrollbar issues */
html {
  overflow-x: hidden !important;
  width: 100% !important;
  max-width: 100vw !important;
  overflow-y: scroll !important;
  scrollbar-gutter: stable !important;
}

body {
  overflow-x: hidden !important;
  overflow-y: auto !important;
  width: 100% !important;
  max-width: 100vw !important;
  -webkit-overflow-scrolling: touch !important;
}

/* Handle menu open state */
body.overflow-hidden,
body.overflow-hidden-tablet,
body.overflow-hidden-mobile,
body[class*="overflow-hidden"] {
  overflow: hidden !important;
  position: fixed !important;
  width: 100% !important;
}

/* Better scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

/* Prevent horizontal scroll issues */
.shopify-section {
  overflow-x: hidden;
  max-width: 100%;
}

/* Grid System Improvements */
@media screen and (max-width: 749px) {
  .grid {
    gap: 1rem !important;
  }

  .grid--1-col-mobile {
    grid-template-columns: 1fr !important;
  }

  .grid--2-col-mobile {
    grid-template-columns: repeat(2, 1fr) !important;
  }

  /* Page Width Mobile */
  .page-width {
    padding-left: 1.5rem !important;
    padding-right: 1.5rem !important;
  }

  /* Section Spacing Mobile */
  .section {
    padding-top: 3rem !important;
    padding-bottom: 3rem !important;
  }

  /* Typography Mobile */
  h1, .h1 {
    font-size: calc(var(--font-heading-scale) * 2.4rem) !important;
    line-height: 1.2 !important;
  }

  h2, .h2 {
    font-size: calc(var(--font-heading-scale) * 2rem) !important;
    line-height: 1.3 !important;
  }

  h3, .h3 {
    font-size: calc(var(--font-heading-scale) * 1.6rem) !important;
    line-height: 1.4 !important;
  }

  /* Button Mobile */
  .button, .shopify-payment-button__button {
    padding: 1.2rem 2.4rem !important;
    font-size: 1.4rem !important;
  }

  /* Image Containers Mobile */
  .media {
    overflow: hidden;
  }

  img, video {
    max-width: 100%;
    height: auto;
  }
}

/* Tablet Responsive */
@media screen and (min-width: 750px) and (max-width: 989px) {
  .page-width {
    padding-left: 3rem !important;
    padding-right: 3rem !important;
  }

  .grid {
    gap: 2rem !important;
  }

  h1, .h1 {
    font-size: calc(var(--font-heading-scale) * 3.2rem) !important;
  }

  h2, .h2 {
    font-size: calc(var(--font-heading-scale) * 2.6rem) !important;
  }
}

/* Featured Product Section Fix */
@media screen and (max-width: 749px) {
  .product-grid {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 1.2rem !important;
  }

  .card-wrapper {
    padding: 0 !important;
  }

  .card__information {
    padding: 1rem 0.5rem !important;
  }

  .card__heading {
    font-size: 1.3rem !important;
    line-height: 1.4 !important;
  }

  .price {
    font-size: 1.2rem !important;
  }
}

/* Collection Cards Mobile */
@media screen and (max-width: 749px) {
  .collection-card {
    margin-bottom: 1.5rem !important;
  }

  .collection-card__title {
    font-size: 1.6rem !important;
    padding: 1rem !important;
  }
}

/* Newsletter Section Mobile */
@media screen and (max-width: 749px) {
  .newsletter-form {
    flex-direction: column !important;
    gap: 1rem !important;
  }

  .newsletter-form__field-wrapper {
    width: 100% !important;
  }

  .newsletter-form__button {
    width: 100% !important;
  }
}

/* Footer Mobile */
@media screen and (max-width: 749px) {
  .footer__content-top {
    grid-template-columns: 1fr !important;
    gap: 2rem !important;
  }

  .footer-block {
    margin-bottom: 2rem !important;
  }

  .footer__list-social {
    justify-content: center !important;
  }
}

/* Header Mobile Improvements */
@media screen and (max-width: 989px) {
  .header__icon {
    width: 4rem !important;
    height: 4rem !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
  }

  .header__heading-link {
    font-size: 1.8rem !important;
  }

  .header__menu-item {
    padding: 1.2rem 0 !important;
  }

  /* Ensure mobile menu works */
  .menu-drawer-container {
    pointer-events: all !important;
  }

  .header__icon--menu,
  .header__icon--cart,
  .header__icon--search,
  .header__icon--account {
    cursor: pointer !important;
    -webkit-tap-highlight-color: transparent !important;
    touch-action: manipulation !important;
  }

  /* Fix mobile menu button */
  summary.header__icon,
  button.header__icon {
    width: 4rem !important;
    height: 4rem !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    cursor: pointer !important;
    background: none !important;
    border: none !important;
    outline: none !important;
    position: relative !important;
    z-index: 10 !important;
  }

  /* Fix details/summary elements */
  details,
  summary {
    display: block !important;
  }

  summary {
    list-style: none !important;
    cursor: pointer !important;
  }

  summary::-webkit-details-marker {
    display: none !important;
  }

  /* Ensure menu drawer is accessible */
  .menu-drawer {
    pointer-events: all !important;
  }

  details[open] > .menu-drawer {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
  }
}

/* Cart Drawer Mobile */
@media screen and (max-width: 749px) {
  .drawer {
    max-width: 100vw !important;
  }

  .cart-item {
    padding: 1.5rem 0 !important;
  }

  .cart-item__details {
    grid-template-columns: 1fr !important;
    gap: 1rem !important;
  }
}

/* Product Page Mobile */
@media screen and (max-width: 749px) {
  .product {
    padding-top: 2rem !important;
  }

  .product__info-container {
    padding: 0 1.5rem !important;
  }

  .product__title {
    font-size: 2.4rem !important;
    margin-bottom: 1rem !important;
  }

  .product__info-wrapper {
    margin-bottom: 2rem !important;
  }

  .product-form__buttons {
    flex-direction: column !important;
    gap: 1rem !important;
  }

  .product-form__submit {
    width: 100% !important;
  }
}

/* Fix for Custom Blocks Overflow */
@media screen and (max-width: 749px) {
  [class*="ai-"] {
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }

  [class*="ai-"][style*="max-width"] {
    max-width: 100% !important;
  }
}

/* Image Aspect Ratio Fixes */
@media screen and (max-width: 749px) {
  .media--square {
    padding-bottom: 100% !important;
  }

  .media--portrait {
    padding-bottom: 125% !important;
  }

  .media--landscape {
    padding-bottom: 66.6% !important;
  }

  .media--cropped {
    padding-bottom: 100% !important;
  }

  .media--16-9 {
    padding-bottom: 56.25% !important;
  }

  .media--circle {
    padding-bottom: 100% !important;
    border-radius: 50% !important;
  }
}

/* Slider/Carousel Mobile Improvements */
@media screen and (max-width: 749px) {
  .slider {
    scroll-padding-left: 1.5rem !important;
  }

  .slider-button {
    width: 3.6rem !important;
    height: 3.6rem !important;
  }

  .slider-button svg {
    width: 1.6rem !important;
    height: 1.6rem !important;
  }
}

/* Modal Mobile */
@media screen and (max-width: 749px) {
  .modal__content {
    max-width: 95vw !important;
    max-height: 90vh !important;
    padding: 2rem 1.5rem !important;
  }

  .modal__close-button {
    top: 1rem !important;
    right: 1rem !important;
  }
}

/* Form Elements Mobile */
@media screen and (max-width: 749px) {
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="password"],
  select,
  textarea {
    font-size: 1.6rem !important;
    padding: 1.2rem !important;
  }

  .field__input {
    padding: 1.2rem !important;
    font-size: 1.4rem !important;
  }

  .field__label {
    font-size: 1.3rem !important;
  }
}

/* Desktop Specific Fixes */
@media screen and (min-width: 990px) {
  /* Prevent unnecessary horizontal scroll on desktop */
  .page-width {
    max-width: min(var(--page-width), 100vw);
  }

  /* Smooth hover transitions */
  a, button, .card, .media img {
    transition: all 0.3s ease;
  }

  /* Better image hover effects */
  .card:hover .media img {
    transform: scale(1.05);
  }

  /* Fix desktop navigation dropdowns */
  header-menu details[open] .mega-menu__content,
  header-menu details[open] > div {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
    pointer-events: all !important;
  }

  .header__menu-item summary {
    cursor: pointer !important;
    user-select: none !important;
  }

  .mega-menu {
    position: relative !important;
  }

  .mega-menu__content {
    position: absolute !important;
    top: 100% !important;
    left: 0 !important;
    z-index: 999 !important;
  }

  /* Ensure all buttons work */
  button,
  .button,
  summary,
  [role="button"] {
    cursor: pointer !important;
    pointer-events: all !important;
    user-select: none !important;
  }

  /* Improved spacing for wide screens */
  @media screen and (min-width: 1400px) {
    .page-width {
      max-width: 140rem;
    }
  }
}

/* Print Styles */
@media print {
  .header,
  .footer,
  .cart-notification,
  .drawer,
  .modal {
    display: none !important;
  }
}

/* High DPI Screen Improvements */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  img, video {
    image-rendering: -webkit-optimize-contrast;
  }
}

/* Accessibility Improvements */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Focus Visible Improvements */
.focused,
*:focus-visible {
  outline: 0.2rem solid rgba(var(--color-foreground), 0.5) !important;
  outline-offset: 0.3rem !important;
}

button:focus-visible,
a:focus-visible {
  outline: 0.2rem solid rgba(var(--color-button), 0.5) !important;
  outline-offset: 0.3rem !important;
}

/* Fix for iOS Safari viewport height */
@supports (-webkit-touch-callout: none) {
  .full-height {
    min-height: -webkit-fill-available !important;
  }
}
